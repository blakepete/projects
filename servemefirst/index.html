<!DOCTYPE html>
<html>
<title>ServeMeFirst Alpha 3.1.0</title>
<head>
<!Blake Peterson 2018
blake.r.peterson@gmail.com>
</head>
<body>

<div id="html">
<table id = "gameTable">
    <tbody id = "dispBody">
        <tr id ="h0">
            <td id = "h0b0">Table:</td>
            <td id = "h0b1">XXX</td>
            <td id = "h0b2">Time:</td>
            <td id = "h0b3">XXX</td>
        </tr>
        <tr id ="h1">
            <td id = "h1b0">Guests:</td>
            <td id = "h1b1">XXX</td>
            <td id = "h1b2">Bill:</td>
            <td id = "h1b3">XXX</td>
        </tr>
        <tr id = "c0">
            <td id = "g0c0">X</td>
            <td id = "g1c0">Guest 0</td>
            <td id = "g2c0">Guest 1</td>
        </tr>
        <tr id = "c1">
            <td id = "g0c1">Greet</td>
            <td id = "g1c1"></td>
            <td id = "g2c1"></td>
        </tr>
        <tr id = "c2">
            <td id = "g0c2">Drink</td>
            <td id = "g1c2"></td>
            <td id = "g2c2"></td>
        </tr>
        <tr id = "c3">
            <td id = "g0c3">Appetizer</td>
            <td id = "g1c3"></td>
            <td id = "g2c3"></td>
        </tr>
        <tr id = "c4">
            <td id = "g0c4">Salad</td>
            <td id = "g1c4"></td>
            <td id = "g2c4"></td>
        </tr>
        <tr id = "c5">
            <td id = "g0c5">Entree</td>
            <td id = "g1c5"></td>
            <td id = "g2c5"></td>
        </tr>
        <tr id = "c6">
            <td id = "g0c6">Dessert</td>
            <td id = "g1c6"></td>
            <td id = "g2c6"></td>
        </tr>
        <tr id = "c7">
            <td id = "g0c7">Bill</td>
            <td id = "g1c7"></td>
            <td id = "g2c7"></td>
        </tr>
        <tr id = "c8">
            <td id = "g0c8">Receipt</td>
            <td id = "g1c8"></td>
            <td id = "g2c8"></td>
        </tr>
    </tbody>
</table>

<!--<p>
    <button id="newTable" type="button" onclick="newTable()">newTable</button>
</p>-->
<div id="buttons">
<!--p> alpha note: yes i know the timers freeze. they work in the background though.</p-->
<p>
<div id="greetButtons">
    <button id="orderGreet" type="button" onclick="order('greet')" >Greet</button> 
</div>
</p>
<p>
<div id="drinkButtons">
    <button id="orderDrink" type="button" onclick="order('drink')">Order Drink</button>
    <button id="makeDrink" type="button" onclick="make('drink')">Make Drink</button>
    <button id="dropDrink" type="button" onclick="drop('drink')">Drop Drink</button>
    <button id="busDrink" type="button" onclick="bus('drink')">Bus Drink</button>
</div>
</p>
<p>
<div id="appButtons">
    <button id="orderApp" type="button" onclick="order('app')">Order App</button>
    <button id="sendApp" type="button" onclick="send('app')">Send App</button>
    <button id="getApp" type="button" onclick="get('app')">Get App</button>
    <button id="dropApp" type="button" onclick="drop('app')">Drop App</button>
    <button id="busApp" type="button" onclick="bus('app')">Bus App</button>
</div>
</p>
<p>
    <div id="saladButtons">
    <button id="makeSalad" type="button" onclick="make('salad')">Make Salad</button>
    <button id="dropSalad" type="button" onclick="drop('salad')">Drop Salad</button>
    <button id="busSalad" type="button" onclick="bus('salad')">Bus Salad</button>
</div>
</p>
<p>
<div id="entreeButtons">
    <button id="orderEntree" type="button" onclick="order('entree')">Order Entree</button>
    <button id="sendEntree" type="button" onclick="send('entree')">Send Entree</button>
    <button id="getEntree" type="button" onclick="get('entree')">Get Entree</button>
    <button id="dropEntree" type="button" onclick="drop('entree')">Drop Entree</button>
    <button id="busEntree" type="button" onclick="bus('entree')">Bus Entree</button>
</div>
</p>
<p>
<div id="dessertButtons">
    <button id="orderDessert" type="button" onclick="order('dessert')">Order Dessert</button>
    <button id="sendDessert" type="button" onclick="send('dessert')">Send Dessert</button>
    <button id="getDessert" type="button" onclick="get('dessert')">Get Dessert</button>
    <button id="dropDessert" type="button" onclick="drop('dessert')">Drop Dessert</button>
    <button id="busDessert" type="button" onclick="bus('dessert')">Bus Dessert</button>
</div>
</p>
<p>
<div id="billButtons">
    <button id="makeBill" type="button" onclick="make('bill')">Print Bill</button>
    <button id="dropBill" type="button" onclick="drop('bill')">Drop Bill</button>
    <button id="busBill" type="button" onclick="bus('bill')">Pick Up Bill</button>
</div>
</p>
<p>
<div id="receiptButtons">
    <button id="makeReceipt" type="button" onclick="make('receipt')">Run Bill</button>
    <button id="dropReceipt" type="button" onclick="drop('receipt')">Drop Receipt</button>
    <button id="busReceipt" type="button" onclick="bus('receipt')">Pick Up Receipt</button>
</div>
</p>
</div>

<div id = "dev">
<p id = "test">test</p>
<button id="debug" type="button" onclick="debug()">debug</button>
</div>

<div id = "cheat">
<button id="cheat1" type="button" onclick="cheat(1)">cheat01</button>
<button id="cheat10" type="button" onclick="cheat(10)">cheat10</button>
<button id="cheat20" type="button" onclick="cheat(20)">cheat20</button>
<br>
<button id="cheat25" type="button" onclick="cheat(25)">cheat25</button>
<button id="cheat50" type="button" onclick="cheat(50)">cheat50</button>
<button id="cheat120" type="button" onclick="cheat(120)">cheat120</button>
<br>dont skip 0 with cheats, things will break
</div>
</div>

<script>
var gTimer = 0;
var gTimerVar = 0;

window.onload = function(){
    displayButtons("none");
    newTable();
    update();
    gTimer = 0;
    gTimerVar = setInterval(function(){
        gTimer++;
        update();
    }, 1000);
    //document.getElementById("dev").style.display = "none"; //comment for dev mode
};

var stage = { //possible new data structure.
//    greet: {
//        blank:"",
//        order: "Greet " + formatTime(timeLeft("greet","needAct")),
//        ordering: "Greeting " + formatTime(timeLeft("greet","actDone"))
//    },
//    drink: {
//        blank:"",
//        order: {
//            display: "Order " + formatTime(timeLeft("drink","needAct")),
//            }
//        ordering: "Ordering " + formatTime(timeLeft("drink","actDone")),
//        taken,
//        sent,
//        making,
//        done,
//        got,
//        dropd,
//        dirty,
//        bus
//    },
//    app: {
//        blank:"",
//        order: "Order " + formatTime(timeLeft("drink","needAct")),
//        ordering: "Ordering " + formatTime(timeLeft("drink","actDone")),
//        taken,
//        sending,
//        sent,
//        done,
//        got,
//        dropd,
//        dirty,
//        bus
//    },
//    salad: {
//        blank:"",
//        order: "Order " + formatTime(timeLeft("drink","needAct")),
//        ordering: "Ordering " + formatTime(timeLeft("drink","actDone")),
//        taken,
//        sent,
//        making,
//        done,
//        got,
//        dropd,
//        dirty,
//        bus
//    },
//    entree: {
//        blank:"",
//        order: "Order " + formatTime(timeLeft("drink","needAct")),
//        ordering: "Ordering " + formatTime(timeLeft("drink","actDone")),
//        taken,
//        sending,
//        sent,
//        done,
//        got,
//        dropd,
//        dirty,
//        bus
//    },
//    dessert: {
//        blank:"",
//        order: "Order " + formatTime(timeLeft("drink","needAct")),
//        ordering: "Ordering " + formatTime(timeLeft("drink","actDone")),
//        taken,
//        sending,
//        sent,
//        done,
//        got,
//        dropd,
//        dirty,
//        bus
//    },
//    bill: {
//        blank:"",
//        taken,
//        sent,
//        making,
//        done,
//        got,
//        dropd,
//        dirty,
//        bus
//    },
//    receipt:{
//        blank:"",
//        taken,
//        sent,
//        making,
//        done,
//        got,
//        dropd
//    },
};

var t = [
    { //table 0
        timeStart: 0,
        occupied: "no",
        course: {
            greet: {
                show: 0,
                needAct: 0,
                actDone: 0,
                orderTaken: 0
            },
            drink: {
                show: 0,
                needAct: 0,
                actDone: 0,
                orderTaken: 0,
                dropDue: 0,
                makeDone: 0,
                makeGot: 0,
                orderDropd: 0,
            },
            app: {
                show: 0,
                needAct: 0,
                actDone: 0,
                orderTaken: 0,
                dropDue: 0,
                makeSent: 0,
                makeDone: 0,
                sendDone: 0,
                makeGot: 0,
                orderDropd: 0,
                emptyDone: 0,
                bus: 0
            },
            salad: {
                show: 0,
                orderTaken: 0,
                dropDue: 0,
                makeDone: 0,
                makeGot: 0,
                orderDropd: 0
            },
            entree: {
                show: 0,
                needAct: 0,
                actDone: 0,
                orderTaken: 0,
                dropDue: 0,
                makeSent: 0,
                makeDone: 0,
                sendDone: 0,
                makeGot: 0,
                orderDropd: 0
            },
            dessert: {
                show: 0,
                needAct: 0,
                actDone: 0,
                orderTaken: 0,
                dropDue: 0,
                makeSent: 0,
                makeDone: 0,
                sendDone: 0,
                makeGot: 0,
                orderDropd: 0
            },
            bill: {
                show: 0,
                orderTaken: 0,
                dropDue: 0,
                makeDone: 0,
                makeGot: 0,
                orderDropd: 0
            },
            receipt: {
                show: 0,
                orderTaken: 0,
                dropDue: 0,
                makeDone: 0,
                makeGot: 0,
                orderDropd: 0
            },
        },
        g: [
            { //guest 0
                thirst: 0,
                hunger: 0,
                drinkEmpty: 0,
                saladEmpty: 0,
                entreeEmpty: 0,
                dessertEmpty: 0,
                saladBus: 0,
                entreeBus: 0,
                dessertBus: 0,
                billBus: 0,
                receiptBus: 0,
                debt: 0
            },
            { //guest 1
                thirst: 0,
                hunger: 0,
                drinkEmpty: 0,
                saladEmpty: 0,
                entreeEmpty: 0,
                dessertEmpty: 0,
                saladBus: 0,
                entreeBus: 0,
                dessertBus: 0,
                billBus: 0,
                receiptBus: 0,
                debt: 0
            }
        ]
    },
    { //table 1
    }
];

function update(){
    var tbl = 0;
    document.getElementById("h0b1").innerHTML= tbl;
    document.getElementById("h0b3").innerHTML= formatTime(getTableTime(tbl));
    document.getElementById("h1b1").innerHTML= t[tbl].g.length;
    document.getElementById("h1b3").innerHTML= "$ " + (t[tbl].g[0].debt + t[tbl].g[1].debt);

    showCheck("greet");
    showCheck("drink");
    showCheck("app");
    showCheck("salad");
    showCheck("entree");
    showCheck("dessert");
    showCheck("bill");
    showCheck("receipt");

    //partial code idea to put in showCheck to not have to specify course and have it do all in a loop from one call.  
//    var all = Object.getOwnPropertyNames(t[tbl].course);
//    var i;
//    for (i = 0; i < all.length; i++) {
//        showCheck(all[i]);
//    }

    switch(t[tbl].occupied){
        case "no":
            //enable buttons
            disabledButtons(false);

            //greet display checks
            if (t[tbl].course.greet.orderTaken == 1){
                t[tbl].course.greet.show = 0;
                document.getElementById("g1c1").innerHTML= "Greeted";
                document.getElementById("g2c1").innerHTML= "Greeted";
            } else if (t[tbl].course.greet.orderTaken === 0){
                t[tbl].course.greet.show = 1;
                document.getElementById("g1c1").innerHTML= "Greet " + formatTime(timeLeft("greet","needAct"));
                document.getElementById("g2c1").innerHTML= "Greet " + formatTime(timeLeft("greet","needAct"));
            }
        
            //drink display checks
            if (t[tbl].course.drink.orderDropd == 1){
                //i think these should really have a "100 - x" inverse added but somehow it works without it /shrug
                document.getElementById("g1c2").innerHTML= centLeft(0,"drinkEmpty",27);
                document.getElementById("g2c2").innerHTML= centLeft(1,"drinkEmpty",27);
            } else if (t[tbl].course.drink.orderTaken == 1){
                document.getElementById("g1c2").innerHTML= "Waiting " + formatTime(timeLeft("drink","dropDue"));
                document.getElementById("g2c2").innerHTML= "Waiting " + formatTime(timeLeft("drink","dropDue"));
            } else if (t[tbl].course.drink.orderTaken === 0){
                document.getElementById("g1c2").innerHTML= "Order " + formatTime(timeLeft("drink","needAct"));
                document.getElementById("g2c2").innerHTML= "Order " + formatTime(timeLeft("drink","needAct"));
            }

            //app display checks
            if (t[tbl].course.app.orderDropd == 1){
                if (t[tbl].course.app.bus === 0){
                    document.getElementById("g1c3").innerHTML= centLeft("app","emptyDone",6);
                    if (t[tbl].course.app.emptyDone <= (gTimer - t[tbl].timeStart)){
                        document.getElementById("busApp").style.display = "inline";
                    }
                } else {
                    document.getElementById("g1c3").innerHTML= "";
                }
                if (t[tbl].course.app.bus === 0){
                    document.getElementById("g2c3").innerHTML= centLeft("app","emptyDone",6);
                    if (t[tbl].course.app.emptyDone <= (gTimer - t[tbl].timeStart)){
                        document.getElementById("busApp").style.display = "inline";
                    }
                } else {
                    document.getElementById("g2c3").innerHTML= "";
                }
            } else if (t[tbl].course.app.orderTaken == 1){
                document.getElementById("g1c3").innerHTML= "Waiting " + formatTime(timeLeft("app","dropDue"));
                document.getElementById("g2c3").innerHTML= "Waiting " + formatTime(timeLeft("app","dropDue"));
                if ((t[tbl].course.app.makeGot === 0) && (t[tbl].course.app.makeSent == 1)){
                    document.getElementById("getApp").innerHTML= "Get App " + formatTime(timeLeft("app","makeDue"));
                }
                if ((t[tbl].course.app.makeGot === 0) && (t[tbl].course.app.makeDone <= (gTimer - t[tbl].timeStart))){
                    document.getElementById("getApp").disabled= false;
                }
                if ((t[tbl].course.app.makeGot === 0) && (t[tbl].course.app.makeDone > (gTimer - t[tbl].timeStart)) && (t[tbl].course.app.makeSent == 1)){
                    document.getElementById("getApp").disabled= true;
                }
            } else if (t[tbl].course.app.orderTaken === 0){
                document.getElementById("g1c3").innerHTML= "Order " + formatTime(timeLeft("app","needAct"));
                document.getElementById("g2c3").innerHTML= "Order " + formatTime(timeLeft("app","needAct"));
            }

            //entree display checks
            if (t[tbl].course.entree.orderDropd == 1){
                if (t[tbl].g[0].entreeBus === 0){
                    document.getElementById("g1c5").innerHTML= centLeft(0,"entreeEmpty",18);
                    if (t[tbl].g[0].entreeEmpty <= (gTimer - t[tbl].timeStart)){
                        document.getElementById("busEntree").style.display = "inline";
                    }
                } else {
                    document.getElementById("g1c5").innerHTML= "";
                }
                if (t[tbl].g[1].entreeBus === 0){
                    document.getElementById("g2c5").innerHTML= centLeft(1,"entreeEmpty",18);
                    if (t[tbl].g[1].entreeEmpty <= (gTimer - t[tbl].timeStart)){
                        document.getElementById("busEntree").style.display = "inline";
                    }
                } else {
                    document.getElementById("g2c5").innerHTML= "";
                }
                t[tbl].course.app.show = 0;
                t[tbl].course.salad.show = 0;
                if ((10 > centLeft(0,"entreeEmpty",18)) && (10 > centLeft(1,"entreeEmpty",18))){
                    if (t[tbl].course.dessert.show === 0){
                        t[tbl].course.dessert.show = 1;
                        t[tbl].course.dessert.needAct = (gTimer - t[tbl].timeStart) + 120;
                        document.getElementById("orderDessert").style.display = "inline";
                    }
                }
            } else if (t[tbl].course.entree.orderTaken == 1){
                document.getElementById("g1c5").innerHTML= "Waiting " + formatTime(timeLeft("entree","dropDue"));
                document.getElementById("g2c5").innerHTML= "Waiting " + formatTime(timeLeft("entree","dropDue"));
                if ((t[tbl].course.entree.makeGot === 0) && (t[tbl].course.entree.makeSent == 1)){
                    document.getElementById("getEntree").innerHTML= "Get Entree " + formatTime(timeLeft("entree","makeDone"));
                }
                if ((t[tbl].course.entree.makeGot === 0) && (t[tbl].course.entree.makeDone <= getTableTime())){
                    document.getElementById("getEntree").disabled= false;
                }
                if ((t[tbl].course.entree.makeGot === 0) && (t[tbl].course.entree.makeDone > getTableTime()) && (t[tbl].course.entree.makeSent == 1)){
                    document.getElementById("getEntree").disabled= true;
                }
            } else if (t[tbl].course.entree.orderTaken === 0){
                document.getElementById("g1c5").innerHTML= "Order " + formatTime(timeLeft("entree","needAct"));
                document.getElementById("g2c5").innerHTML= "Order " + formatTime(timeLeft("entree","needAct"));
            }

            //salad display checks
            if (t[tbl].course.salad.orderDropd == 1){
                if (t[tbl].g[0].saladBus === 0){
                    document.getElementById("g1c4").innerHTML= centLeft(0,"saladEmpty",4);
                    if (t[tbl].g[0].saladEmpty <= getTableTime()){
                        document.getElementById("busSalad").style.display = "inline";
                    }
                } else {
                    document.getElementById("g1c4").innerHTML= "";
                }
                if (t[tbl].g[1].saladBus === 0){
                    document.getElementById("g2c4").innerHTML= centLeft(1,"saladEmpty",4);
                    if (t[tbl].g[1].saladEmpty <= getTableTime()){
                        document.getElementById("busSalad").style.display = "inline";
                    }
                } else {
                    document.getElementById("g2c4").innerHTML= "";
                }
            } else if (t[tbl].course.salad.orderTaken == 1){
                document.getElementById("g1c4").innerHTML= "Waiting " + formatTime(timeLeft("salad","dropDue"));
                document.getElementById("g2c4").innerHTML= "Waiting " + formatTime(timeLeft("salad","dropDue"));
            } else if (t[tbl].course.salad.orderTaken === 0){
                document.getElementById("g1c4").innerHTML= "";
                document.getElementById("g2c4").innerHTML= "";
            }
            
            //dessert display checks
            if (t[tbl].course.dessert.orderDropd == 1){
                if (t[tbl].g[0].dessertBus === 0){
                    document.getElementById("g1c6").innerHTML= centLeft(0,"dessertEmpty",4);
                    if (t[tbl].g[0].dessertEmpty <= getTableTime()){
                        document.getElementById("busDessert").style.display = "inline";
                    }
                } else {
                    document.getElementById("g1c6").innerHTML= "";
                }
                if (t[tbl].g[1].dessertBus === 0){
                    document.getElementById("g2c6").innerHTML= centLeft(1,"dessertEmpty",4);
                    if (t[tbl].g[1].dessertEmpty <= getTableTime()){
                        document.getElementById("busDessert").style.display = "inline";
                    }
                } else {
                    document.getElementById("g2c6").innerHTML= "";
                }
                t[tbl].course.entree.show = 0;
            } else if (t[tbl].course.dessert.orderTaken == 1){
                document.getElementById("g1c6").innerHTML= "Waiting " + formatTime(timeLeft("dessert","dropDue"));
                document.getElementById("g2c6").innerHTML= "Waiting " + formatTime(timeLeft("dessert","dropDue"));
                if ((t[tbl].course.dessert.makeGot === 0) && (t[tbl].course.dessert.makeSent == 1)){
                    document.getElementById("getDessert").innerHTML= "Get Dessert " + formatTime(timeLeft("dessert","makeDone"));
                }
                if ((t[tbl].course.dessert.makeGot === 0) && (t[tbl].course.dessert.makeDone <= getTableTime())){
                    document.getElementById("getDessert").disabled= false;
                }
                if ((t[tbl].course.dessert.makeGot === 0) && (t[tbl].course.dessert.makeDone > getTableTime()) && (t[tbl].course.dessert.makeSent == 1)){
                    document.getElementById("getDessert").disabled= true;
                }
            } else if (t[tbl].course.dessert.orderTaken === 0){
                document.getElementById("g1c6").innerHTML= "Order " + formatTime(timeLeft("dessert","needAct"));
                document.getElementById("g2c6").innerHTML= "Order " + formatTime(timeLeft("dessert","needAct"));
                if (t[tbl].course.entree.orderDropd === 1){
                }
            }

            //bill display checks
            if (t[tbl].course.bill.orderDropd == 1){
                if (t[tbl].g[0].billBus === 0){
                    document.getElementById("g1c7").innerHTML= (100 - centLeft(0,"dessertEmpty",4));
                    if (t[tbl].g[0].billEmpty <= (gTimer - t[tbl].timeStart)){
                        document.getElementById("busBill").style.display = "inline";
                    }
                } else {
                    document.getElementById("g1c7").innerHTML= "";
                }
                if (t[tbl].g[1].billBus === 0){
                    document.getElementById("g2c7").innerHTML= (100 - centLeft(1,"dessertEmpty",4));
                    if (t[tbl].g[1].billEmpty <= (gTimer - t[tbl].timeStart)){
                        document.getElementById("busBill").style.display = "inline";
                    }
                } else {
                    document.getElementById("g2c7").innerHTML= "";
                }
            } else if (t[tbl].course.bill.orderTaken === 1){
                document.getElementById("g1c7").innerHTML= "Waiting " + formatTime(timeLeft("bill","dropDue"));
                document.getElementById("g2c7").innerHTML= "Waiting " + formatTime(timeLeft("bill","dropDue"));
            }

            //receipt display checks
            if (t[tbl].course.receipt.orderDropd == 1){
                if (t[tbl].g[0].receiptBus === 0){
                    document.getElementById("g1c8").innerHTML= "game "; //Math.round((t[tbl].g[0].receiptEmpty - (gTimer - t[tbl].timeStart)) / (1 * (1 / ((t[tbl].g[0].hunger + t[tbl].g[0].thirst)/4))));
                    if (t[tbl].g[0].receiptEmpty <= (gTimer - t[tbl].timeStart)){
                        //document.getElementById("busReceipt").style.display = "inline";
                    }
                } else {
                    document.getElementById("g1c8").innerHTML= "";
                }
                if (t[tbl].g[1].receiptBus === 0){
                    document.getElementById("g2c8").innerHTML= "over"; //Math.round((t[tbl].g[1].receiptEmpty - (gTimer - t[tbl].timeStart)) / (1 * (1 / ((t[tbl].g[1].hunger + t[tbl].g[1].thirst)/4))));
                    if (t[tbl].g[1].receiptEmpty <= (gTimer - t[tbl].timeStart)){
                        //document.getElementById("busRct").style.display = "inline";
                    }
                } else {
                    document.getElementById("g2c8").innerHTML= "";
                }
                t[tbl].course.drink.show = 0;
                t[tbl].course.dessert.show = 0;
                t[tbl].course.bill.show = 0;
            } else if (t[tbl].course.receipt.orderTaken === 1){
                document.getElementById("g1c8").innerHTML= "Waiting " + formatTime(timeLeft("receipt","dropDue"));
                document.getElementById("g2c8").innerHTML= "Waiting " + formatTime(timeLeft("receipt","dropDue"));
            }
            break;

        case "greet":
            //disable buttons
            disabledButtons(true);

            //display timer difference
            document.getElementById("g1c1").innerHTML= "Greeting " + formatTime(timeLeft("greet","actDone"));
            document.getElementById("g2c1").innerHTML= "Greeting " + formatTime(timeLeft("greet","actDone"));
            
            //when timers match, change case back to "no", kick off new stuff
            if (t[tbl].course.greet.actDone == (gTimer - t[tbl].timeStart)){
                t[tbl].occupied = "no";
                t[tbl].course.greet.orderTaken = 1;
                t[tbl].course.drink.needAct = (gTimer - t[tbl].timeStart) + 60;
                update();
            }
            break;
        
        case "orderDrink":
            //disable buttons
            disabledButtons(true);

            //display timer difference
            document.getElementById("g1c2").innerHTML= "Ordering " + formatTime(timeLeft("drink","actDone"));
            document.getElementById("g2c2").innerHTML= "Ordering " + formatTime(timeLeft("drink","actDone"));
            
            //when timers match, change case back to "no", kick off new stuff
            if (t[tbl].course.drink.actDone == (gTimer - t[tbl].timeStart)){
                t[tbl].occupied = "no";
                t[tbl].course.drink.orderTaken = 1;
                t[tbl].course.drink.dropDue = (gTimer - t[tbl].timeStart) + 120;
                t[tbl].course.app.needAct = (gTimer - t[tbl].timeStart) + 180;
                t[tbl].g[0].debt = t[tbl].g[0].debt + getRnd(0, 4);
                t[tbl].g[1].debt = t[tbl].g[1].debt + getRnd(0, 4);
                update();
            }
            break;
        
        case "orderApp":
            //disable buttons
            disabledButtons(true);

            //display timer difference
            document.getElementById("g1c3").innerHTML= "Ordering " + formatTime(timeLeft("app","actDone"));
            document.getElementById("g2c3").innerHTML= "Ordering " + formatTime(timeLeft("app","actDone"));
            
            //when timers match, change case back to "no", kick off new stuff
            if (t[tbl].course.app.actDone == (gTimer - t[tbl].timeStart)){
                t[tbl].occupied = "no";
                t[tbl].course.app.orderTaken = 1;
                t[tbl].course.app.dropDue = (gTimer - t[tbl].timeStart) + 300;
                t[tbl].g[0].debt = t[tbl].g[0].debt + getRnd(2, 6);
                t[tbl].g[1].debt = t[tbl].g[1].debt + getRnd(2, 6);
                update();
            }
            break;
        
        case "orderEntree":
            //disable buttons
            disabledButtons(true);

            //display timer difference
            document.getElementById("g1c5").innerHTML= "Ordering " + formatTime(timeLeft("entree","actDone"));
            document.getElementById("g2c5").innerHTML= "Ordering " + formatTime(timeLeft("entree","actDone"));
            document.getElementById("g1c4").innerHTML= "Ordering " + formatTime(timeLeft("entree","actDone"));
            document.getElementById("g2c4").innerHTML= "Ordering " + formatTime(timeLeft("entree","actDone"));
            
            //when timers match, change case back to "no", kick off new stuff
            if (t[tbl].course.entree.actDone == (gTimer - t[tbl].timeStart)){
                t[tbl].occupied = "no";
                t[tbl].course.entree.orderTaken = 1;
                t[tbl].course.salad.orderTaken = 1;
                t[tbl].course.entree.dropDue = (gTimer - t[tbl].timeStart) + 900;
                t[tbl].course.salad.dropDue = (gTimer - t[tbl].timeStart) + 180;
                t[tbl].g[0].debt = t[tbl].g[0].debt + getRnd(10, 31);
                t[tbl].g[1].debt = t[tbl].g[1].debt + getRnd(10, 31);
                update();
            }
            break;
        
        case "orderDessert":
            //disable buttons
            disabledButtons(true);

            //display timer difference
            document.getElementById("g1c6").innerHTML= "Ordering " + formatTime(timeLeft("dessert","actDone"));
            document.getElementById("g2c6").innerHTML= "Ordering " + formatTime(timeLeft("dessert","actDone"));
            
            //when timers match, change case back to "no", kick off new stuff
            if (t[tbl].course.dessert.actDone == (gTimer - t[tbl].timeStart)){
                t[tbl].occupied = "no";
                t[tbl].course.dessert.orderTaken = 1;
                t[tbl].course.dessert.dropDue = (gTimer - t[tbl].timeStart) + 300;
                t[tbl].g[0].debt = t[tbl].g[0].debt + getRnd(3, 8);
                t[tbl].g[1].debt = t[tbl].g[1].debt + getRnd(3, 8);
                update();
            }
            break;

        case "makeDrink":
            //disable buttons
            disabledButtons(true);

            //display timer difference
            document.getElementById("dropDrink").innerHTML= "Making Drink " + formatTime(timeLeft("drink","makeDone"));
            
            //when timers match, change case back to "no", kick off new stuff
            if (t[tbl].course.drink.makeDone == (gTimer - t[tbl].timeStart)){
                t[tbl].occupied = "no";
                t[tbl].course.drink.makeGot = 1;
                document.getElementById("dropDrink").innerHTML= "Drop Drink";
                update();
            }
            break;

        case "makeSalad":
            //disable buttons
            disabledButtons(true);

            //display timer difference
            document.getElementById("dropSalad").innerHTML= "Making Salad " + formatTime(timeLeft("salad","makeDone"));
            
            //when timers match, change case back to "no", kick off new stuff
            if (t[tbl].course.salad.makeDone == (gTimer - t[tbl].timeStart)){
                t[tbl].occupied = "no";
                t[tbl].course.salad.makeGot = 1;
                document.getElementById("dropSalad").innerHTML= "Drop Salad";
                update();
            }
            break;

        case "makeBill":
            //disable buttons
            disabledButtons(true);

            //display timer difference
            document.getElementById("dropBill").innerHTML= "Printing Bill " + formatTime(timeLeft("bill","makeDone"));
            //when timers match, change case back to "no", kick off new stuff
            if (t[tbl].course.bill.makeDone == (gTimer - t[tbl].timeStart)){
                t[tbl].occupied = "no";
                t[tbl].course.bill.makeGot = 1;
                document.getElementById("dropBill").innerHTML= "Drop Bill";
                update();
            }
            break;

        case "makeReceipt":
            //disable buttons
            disabledButtons(true);

            //display timer difference
            document.getElementById("dropReceipt").innerHTML= "Closing Bill " + formatTime(timeLeft("receipt","makeDone"));
            
            //when timers match, change case back to "no", kick off new stuff
            if (t[tbl].course.receipt.makeDone == (gTimer - t[tbl].timeStart)){
                t[tbl].occupied = "no";
                t[tbl].course.receipt.makeGot = 1;
                document.getElementById("dropReceipt").innerHTML= "Drop Receipt";
                update();
            }
            break;
        
        case "sendApp":
            //disable buttons
            disabledButtons(true);

            //display timer difference
            document.getElementById("getApp").innerHTML= "Sending App " + formatTime(timeLeft("app","sendDone"));

            //when timers match, change case back to "no", kick off new stuff
            if (t[tbl].course.app.sendDone == (gTimer - t[tbl].timeStart)){
                t[tbl].occupied = "no";
                t[tbl].course.app.makeSent = 1;
                update();
            }
            break;
        
        case "sendEntree":
            //disable buttons
            disabledButtons(true);

            //display timer difference
            document.getElementById("getEntree").innerHTML= "Sending Entree " + formatTime(timeLeft("entree","sendDone"));
            
            //when timers match, change case back to "no", kick off new stuff
            if (t[tbl].course.entree.sendDone == (gTimer - t[tbl].timeStart)){
                t[tbl].occupied = "no";
                t[tbl].course.entree.makeSent = 1;
                update();
            }
            break;
        
        case "sendDessert":
            //disable buttons
            disabledButtons(true);

            //display timer difference
            document.getElementById("getDessert").innerHTML= "Sending Dessert " + formatTime(timeLeft("dessert","sendDone"));

            //when timers match, change case back to "no", kick off new stuff
            if (t[tbl].course.dessert.sendDone == (gTimer - t[tbl].timeStart)){
                t[tbl].occupied = "no";
                t[tbl].course.dessert.makeSent = 1;
                update();
            }
            break;
    }
}

function newTable(){
    var tbl = 0;
    t[tbl].timeStart = gTimer;
    t[tbl].g[0].drink = 0;
    t[tbl].g[1].drink = 0;
    t[tbl].g[0].thirst = getRnd(1, 5);
    t[tbl].g[1].thirst = getRnd(1, 5); 
    t[tbl].g[0].hunger = getRnd(1, 5);
    t[tbl].g[1].hunger = getRnd(1, 5);
    t[tbl].g[0].debt = 0;
    t[tbl].g[1].debt = 0;
    t[tbl].course.greet.show = 1;
    t[tbl].course.greet.needAct = (gTimer - t[tbl].timeStart) + 60;
    document.getElementById("orderGreet").style.display = "inline";
}

function order(k){
    var tbl = 0;
    switch(k){
        case 'greet':
            setEndTime("greet","actDone",5);
            t[tbl].occupied = "greet";
            t[tbl].course.drink.show = 1;
            document.getElementById("orderGreet").style.display = "none";
            document.getElementById("orderDrink").style.display = "inline";
            update();
            break;
        case 'drink':
            setEndTime("drink","actDone",30);
            t[tbl].occupied = "orderDrink";
            t[tbl].course.app.show = 1;
            document.getElementById("orderDrink").style.display = "none";
            document.getElementById("makeDrink").style.display = "inline";
            document.getElementById("orderApp").style.display = "inline";
            update();
            break;
        case 'app':
            setEndTime("app","actDone",30);
            t[tbl].occupied = "orderApp";
            document.getElementById("orderApp").style.display = "none";
            document.getElementById("sendApp").style.display = "inline";
            update();
            break;
        case 'entree':
            setEndTime("entree","actDone",60);
            t[tbl].occupied = "orderEntree";
            document.getElementById("orderEntree").style.display = "none";
            document.getElementById("sendEntree").style.display = "inline";
            document.getElementById("makeSalad").style.display = "inline";
            update();
            break;
        case 'dessert':
            setEndTime("dessert","actDone",30);
            t[tbl].occupied = "orderDessert";
            document.getElementById("orderDessert").style.display = "none";
            document.getElementById("sendDessert").style.display = "inline";
            update();
            break;
    }
}
function make(k){
    var tbl = 0;
    switch(k){ //need if checks for orderTaken
        case 'drink':
            setEndTime("drink","makeDone",30);
            t[tbl].occupied = "makeDrink";
            document.getElementById("dropDrink").style.display = "inline";
            document.getElementById("makeDrink").style.display = "none";
            update();
            break;
        case 'salad':
            setEndTime("salad","makeDone",30);
            document.getElementById("dropSalad").style.display = "inline";
            document.getElementById("makeSalad").style.display = "none";
            t[tbl].occupied = "makeSalad";
            update();
            break;
        case 'bill':
            setEndTime("bill","makeDone",30);
            document.getElementById("dropBill").style.display = "inline";
            document.getElementById("makeBill").style.display = "none";
            t[tbl].occupied = "makeBill";
            update();
            break;
        case 'receipt':
            setEndTime("receipt","makeDone",30);
            document.getElementById("dropReceipt").style.display = "inline";
            document.getElementById("makeReceipt").style.display = "none";
            t[tbl].occupied = "makeReceipt";
            update();
            break;
    }
}
function send(k){
    var tbl = 0;
    switch(k){
        case 'app':
            setEndTime("app","makeDone",180);
            setEndTime("app","sendDone",15);
            document.getElementById("sendApp").style.display = "none";
            document.getElementById("getApp").style.display = "inline";
            t[tbl].occupied = "sendApp";
            update();
            break;
        case 'entree':
            setEndTime("entree","makeDone",600);
            setEndTime("entree","sendDone",30);
            document.getElementById("sendEntree").style.display = "none";
            document.getElementById("getEntree").style.display = "inline";
            t[tbl].occupied = "sendEntree";
            update();
            break;
        case 'dessert':
            setEndTime("dessert","makeDone",180);
            setEndTime("dessert","sendDone",15);
            document.getElementById("sendDessert").style.display = "none";
            document.getElementById("getDessert").style.display = "inline";
            t[tbl].occupied = "sendDessert";
            update();
            break;
    }
}
function get(k){
    var tbl = 0;
    switch(k){
        case 'app':
            if (t[tbl].course.app.makeDone <= getTableTime()){
                t[tbl].course.app.makeGot = 1;
                document.getElementById("getApp").innerHTML= "Get App";
                document.getElementById("dropApp").style.display = "inline";
                document.getElementById("getApp").style.display = "none";
            }
            update();
            break;
        case 'entree':
            if (t[tbl].course.entree.makeDone <= getTableTime()){
                t[tbl].course.entree.makeGot = 1;
                document.getElementById("getEntree").innerHTML= "Get Entree";
                document.getElementById("dropEntree").style.display = "inline";
                document.getElementById("getEntree").style.display = "none";
            }
            update();
            break;
        case 'dessert':
            if (t[tbl].course.dessert.makeDone <= getTableTime()){
                t[tbl].course.dessert.makeGot = 1;
                document.getElementById("getDessert").innerHTML= "Get Dessert";
                document.getElementById("dropDessert").style.display = "inline";
                document.getElementById("getDessert").style.display = "none";
            }
            update();
            break;
    }
}
function drop(k){
    var tbl = 0;
    switch(k){
        case 'drink':
            if(t[tbl].course.drink.makeGot == 1){
                t[tbl].course.drink.orderDropd = 1;
                setEmptyTime(0,"drinkEmpty",2700);
                setEmptyTime(0,"drinkEmpty",2700);
                document.getElementById("dropDrink").style.display = "none";
                document.getElementById("makeDrink").style.display = "inline";
            }
            update();
            break;
        case 'app':
            if(t[tbl].course.app.makeGot == 1){
                t[tbl].course.app.orderDropd = 1;
                setEmptyTime("app","emptyDone",600);
                document.getElementById("dropApp").style.display = "none";
                document.getElementById("orderEntree").style.display = "inline";
                t[tbl].course.salad.show = 1;
                t[tbl].course.entree.show = 1;
                setEndTime("entree","needAct",120);
            }
            update();
            break;
        case 'salad':
            if(t[tbl].course.salad.makeGot == 1){
                t[tbl].course.salad.orderDropd = 1;
                setEmptyTime(0,"saladEmpty",400);
                setEmptyTime(1,"saladEmpty",400);
                document.getElementById("dropSalad").style.display = "none";
            }
            update();
            break;
        case 'entree':
            if(t[tbl].course.entree.makeGot == 1){
                t[tbl].course.entree.orderDropd = 1;
                setEmptyTime(0,"entreeEmpty",1800);
                setEmptyTime(1,"entreeEmpty",1800);
                document.getElementById("dropEntree").style.display = "none";
            }
            update();
            break;
        case 'dessert':
            if(t[tbl].course.dessert.makeGot == 1){
                t[tbl].course.dessert.orderDropd = 1;
                setEmptyTime(0,"dessertEmpty",400);
                setEmptyTime(1,"dessertEmpty",400);
                document.getElementById("dropDessert").style.display = "none";
                document.getElementById("makeBill").style.display = "inline";
                t[tbl].course.bill.show = 1;
                t[tbl].course.bill.orderTaken = 1;
                setEndTime("bill","dropDue",300);
            }
            update();
            break;
        case 'bill':
            if(t[tbl].course.bill.makeGot == 1){
                t[tbl].course.bill.orderDropd = 1;
                setEmptyTime(0,"billEmpty",100);
                setEmptyTime(1,"billEmpty",100);
                document.getElementById("dropBill").style.display = "none";
                t[tbl].course.receipt.orderTaken = 1;
                setEndTime("receipt","dropDue",300);
                setEndTime("receipt","needAct",300);
            }
            update();
            break;
        case 'receipt':
            if(t[tbl].course.receipt.makeGot == 1){
                t[tbl].course.receipt.orderDropd = 1;
                setEmptyTime(0,"receiptEmpty",100);
                setEmptyTime(1,"receiptEmpty",100);
                document.getElementById("dropReceipt").style.display = "none";
            }
            update();
            break;
    }
}
function bus(k){
    var tbl = 0;
    switch(k){
        case 'app':
            if(t[tbl].course.app.emptyDone <= getTableTime()){
                t[tbl].course.app.bus = 1;
                document.getElementById("busApp").style.display = "none";
            }
            update();
            break;
        case 'salad':
            if(t[tbl].g[0].saladEmpty <= getTableTime()){
                t[tbl].g[0].saladBus = 1;
                document.getElementById("busSalad").style.display = "none";
            }
            if(t[tbl].g[1].saladEmpty <= getTableTime()){
                t[tbl].g[1].saladBus = 1;
                document.getElementById("busSalad").style.display = "none";
            }
            update();
            break;
        case 'entree':
            if(t[tbl].g[0].entreeEmpty <= getTableTime()){
                t[tbl].g[0].entreeBus = 1;
                document.getElementById("busEntree").style.display = "none";
            }
            if(t[tbl].g[1].entreeEmpty <= getTableTime()){
                t[tbl].g[1].entreeBus = 1;
                document.getElementById("busEntree").style.display = "none";
            }
            update();
            break;
        case 'dessert':
            if(t[tbl].g[0].dessertEmpty <= getTableTime()){
                t[tbl].g[0].dessertBus = 1;
                document.getElementById("busDessert").style.display = "none";
            }
            if(t[tbl].g[1].dessertEmpty <= getTableTime()){
                t[tbl].g[1].dessertBus = 1;
                document.getElementById("busDessert").style.display = "none";
            }
            update();
            break;
        case 'bill':
            if ((t[tbl].g[0].billEmpty <= getTableTime()) && (t[tbl].g[1].billEmpty <= getTableTime())){
                t[tbl].g[0].billBus = 1;
                t[tbl].g[1].billBus = 1;
                t[0].course.receipt.show = 1;
                document.getElementById("busBill").style.display = "none";
                document.getElementById("makeReceipt").style.display = "inline";
            }
            update();
            break;
    }
}


function getRnd(min, max) {
    //returns int; min (included) and max (excluded)
    return Math.floor(Math.random() * (max - min) ) + min;
}
function formatTime(s) {
    //source: https://stackoverflow.com/a/37770048
    return(0>s?(s=-s,'-'):0)+(s-(s%=60))/60+(9<s?':':':0')+s;
}

function displayButtons(k){
    var el = document.getElementById('buttons');
    var all = el.getElementsByTagName('button');
    var i;
    for (i = 0; i < all.length; i++) {
       all[i].style.display = k;
    }
}
function disabledButtons(k){
    //enable buttons
    var el = document.getElementById('buttons');
    var all = el.getElementsByTagName('button');
    var i;
    for (i = 0; i < all.length; i++) {
        all[i].disabled = k;
    }
}
function showCheck(c){
    var tbl = 0;
    var a, b;
    switch(t[tbl].course[c].show){
    case 1:
        a = "visible";
        b = "inline";
        break;
    case 0:
        a = "hidden";
        b = "none";
        break;
    }
    switch(c){
    case "greet":
        document.getElementById("c1").style.visibility = a;
        document.getElementById("greetButtons").style.display = b;
        break;
    case "drink":
        document.getElementById("c2").style.visibility = a;
        document.getElementById("drinkButtons").style.display = b;
        break;
    case "app":
        document.getElementById("c3").style.visibility = a;
        document.getElementById("appButtons").style.display = b;
        break;
    case "salad":
        document.getElementById("c4").style.visibility = a;
        document.getElementById("saladButtons").style.display = b;
        break;
    case "entree":
        document.getElementById("c5").style.visibility = a;
        document.getElementById("entreeButtons").style.display = b;
        break;
    case "dessert":
        document.getElementById("c6").style.visibility = a;
        document.getElementById("dessertButtons").style.display = b;
        break;
    case "bill":
        document.getElementById("c7").style.visibility = a;
        document.getElementById("billButtons").style.display = b;
        break;
    case "receipt":
        document.getElementById("c8").style.visibility = a;
        document.getElementById("receiptButtons").style.display = b;
        break;
    }
}
function timeLeft(c,x){
    var tbl = 0;
    return (t[tbl].course[c][x] - getTableTime(tbl));
}
function centLeft(c,x,y){
    var tbl = 0;
    if (c == "app"){
        return ((Math.round(((t[tbl].course[c][x] - (gTimer - t[tbl].timeStart))) / (y * (1 / ((t[tbl].g[0].hunger + t[tbl].g[1].hunger)/2))))) + "%");
    } else {
        return ((Math.round((t[tbl].g[[c]][x] - getTableTime(tbl)) / (y * (1 / t[tbl].g[c].thirst))))+ "%");
    }
}
function getTableTime(tbl){
    return (gTimer - t[tbl].timeStart);
}
function setEndTime(c,x,y){
    var tbl = 0;
    t[tbl].course[c][x] = (getTableTime(tbl) + y);
}
function setEmptyTime(c,x,y){
    var tbl = 0;
    if (c == "app"){
        t[tbl].course[c][x] = getTableTime(tbl) + (y * (1 / ((t[tbl].g[0].hunger + t[tbl].g[1].hunger)/2)));
    } else {
        t[tbl].g[c][x] = getTableTime(tbl) + (y * (1 / t[tbl].g[c].thirst));
    }
}

function debug(){
    var tbl = 0;
    document.getElementById("test").innerHTML= timeLeft("drink", "needAct");
}
function cheat(k){
    gTimer = gTimer + k;
}

</script>
</body>
</html>